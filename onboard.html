<!doctype html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Engini - Review & Activate Worker</title>
  <link rel="icon" type="image/png" href="image.png"/>
  <style>
    :root{
      --bg:#f7f9fc;
      --card:#ffffff;
      --ink:#0b1220;
      --muted:#64748b;
      --line:#e6eaf0;
      --primary:#1677ff;
      --primary-ink:#fff;
      --success:#0bb07b;
      --ring:rgba(22,119,255,.15);
      --chip:#f1f4fb;
      --shadow:0 8px 24px rgba(9,30,66,.08);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font:14px/1.5 Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
      color:var(--ink);
      background:
        radial-gradient(#e9edf5 1px, transparent 1px) 0 0 / 18px 18px,
        var(--bg);
    }
    .container{max-width:1120px;margin:0 auto;padding:0 20px}

    /* Header */
    .header{position:sticky;top:0;z-index:50;background:rgba(255,255,255,.72);backdrop-filter:saturate(1.1) blur(8px);border-bottom:1px solid var(--line)}
    .header-inner{display:flex;align-items:center;justify-content:space-between;height:64px}
    .brand{display:flex;align-items:center;gap:10px;font-weight:700;font-size:18px}
    .brand img{height:26px;width:auto}
    .progress{display:flex;align-items:center;gap:8px;color:var(--muted);font-weight:600}
    .progress .dot{display:inline-block;width:20px;height:20px;border:2px solid var(--line);border-radius:999px;background:#fff;vertical-align:-4px}
    .progress .active .dot{background:var(--primary);border-color:var(--primary)}
    .cta-sales{height:36px;padding:0 14px;border-radius:10px;border:1px solid var(--line);background:#fff;cursor:pointer;font-weight:600}
    .cta-sales:hover{box-shadow:var(--shadow)}

    /* Page head */
    .h1{font-size:28px;line-height:1.2;margin:24px 0 8px;text-align:center}
    .lead{max-width:760px;margin:0 auto;text-align:center;color:var(--muted)}

    /* Cards / layout */
    .layout{display:grid;grid-template-columns:1fr 320px;gap:18px;margin-top:16px}
    @media (max-width:980px){.layout{grid-template-columns:1fr}}
    .panel{
      background:var(--card);
      border:1px solid var(--line);
      border-radius:12px;
      box-shadow:0 4px 14px rgba(9,30,66,.05);
    }
    .panel .inner{padding:16px}

    .worker-row{display:flex;align-items:center;gap:12px;margin-bottom:10px}
    .avatar{width:48px;height:48px;border-radius:999px;border:2px solid var(--line);object-fit:cover;background:#fff}
    .muted{color:var(--muted)}
    .row-between{display:flex;align-items:center;justify-content:space-between;gap:12px}

    .chips{display:flex;flex-wrap:wrap;gap:8px}
    .chip{display:inline-flex;align-items:center;padding:6px 10px;border:1px solid var(--line);border-radius:999px;background:var(--chip);font-weight:600}
    .list{margin:0;padding-left:18px}
    .list li{margin:4px 0}
    .scrollbox{max-height:320px;overflow:auto;border:1px dashed var(--line);border-radius:10px;padding:12px;background:#fff}

    .btn{height:38px;padding:0 14px;border-radius:10px;border:1px solid var(--line);background:#fff;font-weight:700;cursor:pointer}
    .btn:hover{box-shadow:var(--shadow)}
    .btn.primary{background:var(--primary);color:var(--primary-ink);border-color:var(--primary)}
    .btn:disabled{opacity:.6;cursor:not-allowed}
    .link{color:var(--primary);font-weight:700;text-decoration:none}

    /* Summary */
    .summary{position:sticky;top:84px}
    .summary .row{display:flex;align-items:center;justify-content:space-between;margin:8px 0}
    .label{color:var(--muted)}
    .value{font-weight:800}
    .total{font-size:18px}

    /* Modals */
    .modal-backdrop{position:fixed;inset:0;background:rgba(9,22,36,.45);display:none;align-items:center;justify-content:center;z-index:120}
    .modal-backdrop.show{display:flex}
    .modal{
      width:min(720px,94vw);background:#fff;border:1px solid var(--line);
      border-radius:12px;box-shadow:0 24px 60px rgba(0,0,0,.25);overflow:hidden
    }
    .modal header{display:flex;align-items:center;justify-content:space-between;padding:12px 14px;border-bottom:1px solid var(--line)}
    .modal .h3{font-weight:800}
    .modal .scroll{max-height:62vh;overflow:auto;padding:14px}
    .modal .close{background:transparent;border:0;font-size:20px;cursor:pointer}

    .row{display:flex;gap:10px}
    .field{width:100%;padding:10px;border:1px solid var(--line);border-radius:10px}
    .ok{background:var(--primary);color:#fff;border:1px solid var(--primary);height:38px;border-radius:10px;padding:0 14px;font-weight:700}
    .sso{background:#111827;color:#fff;border:1px solid #111827;height:38px;border-radius:10px;padding:0 14px;font-weight:700}

    .foot-actions{display:flex;align-items:center;justify-content:space-between;gap:10px;margin-top:12px}
  </style>
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="header-inner container">
      <div class="brand">
        <img src="logo.png" alt="Engini logo">
      </div>
      <div class="progress">
        <span><span class="dot"></span> Select Worker</span>
        <span>›</span>
        <span><span class="dot"></span> Select Skills</span>
        <span>›</span>
        <span class="active"><span class="dot"></span> Onboard</span>
        <span>›</span>
        <span><span class="dot"></span> Chat Workspace</span>
      </div>
      <button class="cta-sales" id="btnTalkSales">Talk to Sales</button>
    </div>
  </header>

  <main class="container">
    <h1 class="h1">Review & Activate Worker</h1>
    <p class="lead">Confirm the worker and selected Skills. Pricing updates are transparent and based on your selection.</p>

    <div class="layout">
      <!-- LEFT: Review -->
      <section class="panel">
        <div class="inner">
          <!-- Worker header -->
          <div class="worker-row">
            <img id="workerAvatar" class="avatar" src="" alt="worker"/>
            <div>
              <div id="workerName" style="font-weight:800">Worker</div>
              <div id="workerDesc" class="muted" style="font-size:13px">Selected Skills appear below.</div>
            </div>
          </div>

          <!-- Skills list -->
          <div class="row-between" style="margin:6px 0 8px">
            <div class="muted"><b id="skillsCount">0</b> Skills selected</div>
            <a class="link" href="skills.html">Manage Skills</a>
          </div>

          <div class="scrollbox" id="skillsList" aria-live="polite">
            <!-- list injected -->
          </div>

          <div class="foot-actions">
            <a class="link" href="skills.html">← Back to Skills</a>
            <button id="btnOnboard" class="btn primary">Onboard Worker</button>
          </div>
        </div>
      </section>

      <!-- RIGHT: Summary -->
      <aside class="panel summary">
        <div class="inner">
          <div style="font-weight:800">Pricing Summary</div>
          <div class="row"><span class="label">Base (includes 5):</span><span id="priceBase" class="value">$2,000</span></div>
          <div class="row"><span class="label">Extra skills:</span><span id="priceExtra" class="value">$0</span></div>
          <hr style="border:none;border-top:1px solid var(--line);margin:10px 0">
          <div class="row total"><span class="label">Total</span><span id="priceTotal" class="value">$2,000</span></div>

          <div style="margin-top:10px">
            <div class="muted" style="font-size:12px">Billing note: First 5 Skills are included in the base license. Each additional Skill adds $250/month.</div>
          </div>
        </div>
      </aside>
    </div>
  </main>

  <!-- Modal: Talk to Sales -->
  <div id="salesModal" class="modal-backdrop" role="dialog" aria-modal="true" aria-labelledby="salesTitle" onclick="closeModal('salesModal')">
    <div class="modal" onclick="event.stopPropagation()">
      <header>
        <div id="salesTitle" class="h3">Talk to Sales</div>
        <button class="close" onclick="closeModal('salesModal')">×</button>
      </header>
      <div class="scroll">
        <div class="row" style="margin-bottom:10px">
          <input class="field" placeholder="Name">
          <input class="field" placeholder="Email">
        </div>
        <div class="row">
          <input class="field" placeholder="Company">
          <input class="field" placeholder="Phone">
        </div>
        <textarea class="field" style="margin-top:10px;height:120px" placeholder="Tell us about your needs"></textarea>
      </div>
      <div style="display:flex;align-items:center;justify-content:space-between;gap:12px;padding:12px 14px;border-top:1px solid var(--line)">
        <span class="muted">We’ll get back to you shortly.</span>
        <button class="ok" onclick="closeModal('salesModal')">Send</button>
      </div>
    </div>
  </div>

  <!-- Modal: Signup -->
  <div id="signupModal" class="modal-backdrop" role="dialog" aria-modal="true" aria-labelledby="signupTitle" onclick="closeModal('signupModal')">
    <div class="modal" onclick="event.stopPropagation()">
      <header>
        <div id="signupTitle" class="h3">Create account & start</div>
        <button class="close" onclick="closeModal('signupModal')">×</button>
      </header>
      <div class="scroll">
        <div class="row" style="margin-bottom:10px">
          <input id="fName" class="field" placeholder="Full name" autocomplete="name">
          <input id="fEmail" class="field" placeholder="Work email" autocomplete="email">
        </div>
        <div class="row" style="margin-bottom:10px">
          <input id="fCompany" class="field" placeholder="Company" autocomplete="organization">
          <input id="fRole" class="field" placeholder="Role/Title" autocomplete="organization-title">
        </div>
        <input id="fPass" class="field" type="password" placeholder="Password (min 6 chars)" autocomplete="new-password">
<div style="display:flex;align-items:center;gap:8px;margin-top:10px">
  <button class="sso" onclick="mockSSO()">Continue with SSO</button>
  <span class="muted" style="font-size:12px">or</span>
  <a 
    href="https://app.engini.io/login?_gl=1*kzwknz*_ga*MTk1NzI5MjYwNS4xNzU2ODk2MzMz*_ga_ZP4XQNTD22*czE3NTkxNTU3ODEkbzM3JGcwJHQxNzU5MTU1NzgxJGo2MCRsMCRoMA..*_gcl_au*MjYyMDc0OTE2LjE3NTY4OTYzMzQ." 
    class="ok"
    style="text-decoration:none;display:inline-flex;align-items:center;justify-content:center"
  >
    Create account & start
  </a>
</div>

        <div id="signupError" class="muted" style="color:#b42318;margin-top:8px;display:none">Please fill all fields properly.</div>
      </div>
      <div style="display:flex;align-items:center;justify-content:flex-end;gap:12px;padding:12px 14px;border-top:1px solid var(--line)">
        <button class="btn" onclick="closeModal('signupModal')">Cancel</button>
      </div>
    </div>
  </div>

  <script>
    // ----- LocalStorage keys -----
    const LS = {
      WORKER:'engini.selectedWorker',
      SKILLS:'engini.selectedSkills',
      PRICING:'engini.pricing',
      SIGNUP:'engini.signup'
    };

    function getLS(key, fallback=null){ try{ return JSON.parse(localStorage.getItem(key) || JSON.stringify(fallback)); }catch{ return fallback; } }
    function setLS(key, val){ localStorage.setItem(key, JSON.stringify(val)); }

    function uiAvatar(name){ return `https://ui-avatars.com/api/?name=${encodeURIComponent(name||'AI')}&background=E6EEF8&color=1B2A4A&size=96&bold=true`; }
    function openModal(id){ document.getElementById(id).classList.add('show'); }
    function closeModal(id){ document.getElementById(id).classList.remove('show'); }

    // ----- State -----
    const selWorker = getLS(LS.WORKER, null);
    const selectedSkills = getLS(LS.SKILLS, []);
    const pricing = getLS(LS.PRICING, {base:2000, extra:0, total:2000, count:selectedSkills.length});

    if(!selWorker){ location.href = 'index.html'; }

    // ----- Elements -----
    document.getElementById('btnTalkSales').onclick = ()=> openModal('salesModal');
    const workerName = document.getElementById('workerName');
    const workerDesc = document.getElementById('workerDesc');
    const workerAvatar = document.getElementById('workerAvatar');
    const skillsCount = document.getElementById('skillsCount');
    const skillsList = document.getElementById('skillsList');
    const priceBase = document.getElementById('priceBase');
    const priceExtra = document.getElementById('priceExtra');
    const priceTotal = document.getElementById('priceTotal');
    const btnOnboard = document.getElementById('btnOnboard');

    // ----- Render -----
    workerName.textContent = selWorker?.name || 'Worker';
    workerDesc.textContent = 'You can always adjust Skills later.';
    workerAvatar.src = getLS('engini.workerAvatar', uiAvatar(selWorker?.name));
    workerAvatar.onerror = () => { workerAvatar.src = uiAvatar(selWorker?.name); };

    skillsCount.textContent = selectedSkills.length;
    skillsList.innerHTML = `
      <ul class="list">
        ${selectedSkills.map(s => `<li>${s}</li>`).join('')}
      </ul>
    `;

    priceBase.textContent = `$${(pricing.base ?? 2000).toLocaleString()}`;
    priceExtra.textContent = `$${(pricing.extra ?? 0).toLocaleString()}`;
    priceTotal.textContent = `$${(pricing.total ?? 2000).toLocaleString()}`;

    // ----- Onboard flow -----
    btnOnboard.addEventListener('click', ()=> openModal('signupModal'));

    function submitSignup(){
      const name = document.getElementById('fName').value.trim();
      const email = document.getElementById('fEmail').value.trim();
      const company = document.getElementById('fCompany').value.trim();
      const role = document.getElementById('fRole').value.trim();
      const pass = document.getElementById('fPass').value;

      const errorEl = document.getElementById('signupError');

      if(!name || !email || !company || !role || !pass || pass.length < 6){
        errorEl.style.display = 'block';
        return;
      }
      errorEl.style.display = 'none';

      setLS(LS.SIGNUP, {name,email,company,role,ts:Date.now()});
      // In a real app, call your backend; here we simulate success.
      closeModal('signupModal');
      // route to chat workspace
      window.location.href = 'chat.html';
    }

    function mockSSO(){
      // Minimal mock SSO success path
      setLS(LS.SIGNUP, {sso:true, email:'sso@example.com', ts:Date.now()});
      closeModal('signupModal');
      window.location.href = 'chat.html';
    }

    // expose globally
    window.submitSignup = submitSignup;
    window.mockSSO = mockSSO;
  </script>
</body>
</html>
